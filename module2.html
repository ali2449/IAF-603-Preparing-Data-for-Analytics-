<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Module 2: Database Concepts - IAF 603</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&family=Source+Code+Pro:wght@400;500;700&display=swap" rel="stylesheet">
    <!-- Highlight.js for code highlighting -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/default.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <!-- MathJax CDN -->
    <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <!-- Custom MathJax Configuration -->
    <script src="./js/mathjax.js"></script>
    <!-- Custom Styles -->
    <link rel="stylesheet" href="./css/styles.css">
</head>
<body>
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-light bg-light shadow-sm sticky-top">
        <div class="container-fluid">
            <a class="navbar-brand" href="./index.html">IAF 603: Preparing Data for Analytics</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="./index.html">Home</a>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                            Modules
                        </a>
                        <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                            <li><a class="dropdown-item" href="./module1.html">Module 1</a></li>
                            <li><a class="dropdown-item" href="./module2.html">Module 2</a></li>
                            <li><a class="dropdown-item" href="./module3.html">Module 3</a></li>
                            <li><a class="dropdown-item" href="./module4.html">Module 4</a></li>
                            <li><a class="dropdown-item" href="./module5.html">Module 5</a></li>
                            <li><a class="dropdown-item" href="./module6.html">Module 6</a></li>
                            <li><a class="dropdown-item" href="./module7.html">Module 7</a></li>
                            <li><a class="dropdown-item" href="./module8.html">Module 8</a></li>
                            <li><a class="dropdown-item" href="./module9.html">Module 9</a></li>
                            <li><a class="dropdown-item" href="./module10.html">Module 10</a></li>
                            <li><a class="dropdown-item" href="./module11.html">Module 11</a></li>
                            <li><a class="dropdown-item" href="./module12.html">Module 12</a></li>
                            <li><a class="dropdown-item" href="./module13.html">Module 13</a></li>
                            <li><a class="dropdown-item" href="./module14.html">Module 14</a></li>
                        </ul>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="./index.html#contact">Contact</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="container my-5">
        <!-- Module Title -->
        <section class="text-center py-5 bg-white rounded shadow">
            <h1 class="display-4 fw-bold text-dark">Module 2: Database Concepts</h1>
        </section>

        <!-- Module Content -->
        <section class="my-5">
            <div class="bg-white p-4 rounded shadow">
                <!-- Learning Objectives -->
                <h2 class="h3 fw-bold border-bottom pb-2 mb-4">Learning Objectives</h2>
                <p>Upon completion of this module, participants will be able to:</p>
                <ul>
                    <li>Define and differentiate core relational database components: tables, columns, rows, and data types.</li>
                    <li>Understand and apply various integrity constraints, including <code>NOT NULL</code>, <code>UNIQUE</code>, and <code>CHECK</code>.</li>
                    <li>Master the concepts and practical application of primary keys, foreign keys, and composite keys.</li>
                    <li>Explain the purpose of database schemas and their role in organization and security.</li>
                    <li>Apply normalization principles (1NF, 2NF, 3NF) to design efficient and robust database structures.</li>
                    <li>Create and interpret Entity-Relationship Diagrams (ERDs) to visually model database relationships.</li>
                </ul>

                <!-- Introduction to Database Concepts -->
                <h2 class="h3 fw-bold border-bottom pb-2 mb-4">Introduction to Database Concepts</h2>
                <p>Data preparation often begins with understanding how data is stored and organized. Relational databases, built upon the relational model proposed by E.F. Codd in 1970, remain the backbone of most structured data storage. This module dives into the fundamental building blocks of these databases: tables, keys, and schemas. We will also explore normalization, a crucial design principle that minimizes redundancy and improves data integrity, and Entity-Relationship Diagrams (ERDs), which provide a visual blueprint of a database. A solid grasp of these concepts is essential for anyone working with structured data, enabling efficient querying and robust data management.</p>
                <p>In practice, consider a hospital system in Greensboro, NC, managing patient records, appointments, and billing. A poorly designed database could lead to errors like duplicate patient entries or mismatched billing records, while a well-structured database ensures accurate and efficient data retrieval for healthcare analytics.</p>

                <!-- Tables, Columns, Rows, and Data Types -->
                <h3 class="h4 fw-bold mb-3">Tables, Columns, Rows, and Data Types</h3>
                <p>Relational databases organize data into tables, which are composed of columns (attributes) and rows (records). Each column has a specific data type to enforce consistency.</p>
                <ul>
                    <li><strong>Table:</strong> A collection of related data organized into rows and columns, similar to a spreadsheet. E.g., a <code>Customers</code> table for a retail business.</li>
                    <li><strong>Column (Attribute/Field):</strong> Represents a specific characteristic of the data, with a defined data type (e.g., <code>INT</code>, <code>VARCHAR</code>, <code>DATE</code>).</li>
                    <li><strong>Row (Record/Tuple):</strong> A single, complete entry in a table, like one customer's details.</li>
                    <li><strong>Data Types:</strong> Define the kind of data a column can hold (e.g., <code>INT</code> for integers, <code>VARCHAR</code> for strings, <code>DATE</code> for dates, <code>BOOLEAN</code> for true/false). Choosing correct data types prevents errors, like storing a phone number as a number (losing leading zeros).</li>
                </ul>
                <p><strong>Example:</strong> In a library system, a <code>Books</code> table might have columns <code>isbn</code> (VARCHAR), <code>title</code> (VARCHAR), <code>publish_date</code> (DATE), and <code>available</code> (BOOLEAN). A row represents one book, like {"1234567890", "Data Science Basics", "2023-01-15", true}.</p>
                <p><strong>Sample Table (Books):</strong></p>
                <table class="table table-bordered">
                    <thead>
                        <tr>
                            <th>isbn</th>
                            <th>title</th>
                            <th>publish_date</th>
                            <th>available</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>1234567890</td>
                            <td>Data Science Basics</td>
                            <td>2023-01-15</td>
                            <td>true</td>
                        </tr>
                        <tr>
                            <td>0987654321</td>
                            <td>SQL for Beginners</td>
                            <td>2022-06-20</td>
                            <td>false</td>
                        </tr>
                        <tr>
                            <td>1122334455</td>
                            <td>Big Data Analytics</td>
                            <td>2024-03-10</td>
                            <td>true</td>
                        </tr>
                    </tbody>
                </table>

                <!-- Integrity Constraints -->
                <h3 class="h4 fw-bold mb-3">Integrity Constraints</h3>
                <p>Integrity constraints enforce rules to ensure data accuracy and reliability, critical for maintaining trustworthy databases.</p>
                <ul>
                    <li><strong>NOT NULL:</strong> Ensures a column cannot be empty (e.g., every patient must have a name).</li>
                    <li><strong>UNIQUE:</strong> Ensures all values in a column or set of columns are distinct (e.g., no two patients have the same ID).</li>
                    <li><strong>PRIMARY KEY:</strong> Uniquely identifies each row; must be UNIQUE and NOT NULL (e.g., <code>patient_id</code>).</li>
                    <li><strong>FOREIGN KEY:</strong> Links a column in one table to a PRIMARY KEY in another, enforcing referential integrity (e.g., an admission references a patient).</li>
                    <li><strong>CHECK:</strong> Ensures values meet a condition (e.g., <code>age >= 0</code>).</li>
                </ul>
                <div class="code-block">
                    <button class="btn btn-sm btn-secondary copy-btn" onclick="copyCode(this)">Copy</button>
                    <pre><code class="language-sql">-- PATIENTS table: subject_id is PRIMARY KEY, name cannot be NULL, age must be positive
CREATE TABLE PATIENTS (
    subject_id INT PRIMARY KEY,
    name VARCHAR(100) NOT NULL,
    age INT CHECK (age >= 0),
    gender VARCHAR(10)
);
-- ADMISSIONS table: hadm_id is PRIMARY KEY, subject_id is a FOREIGN KEY
CREATE TABLE ADMISSIONS (
    hadm_id INT PRIMARY KEY,
    subject_id INT NOT NULL,
    admit_time TIMESTAMP NOT NULL,
    discharge_time TIMESTAMP,
    diagnosis VARCHAR(255),
    FOREIGN KEY (subject_id) REFERENCES PATIENTS(subject_id),
    UNIQUE (subject_id, admit_time) -- Composite key
);
-- LAB_RESULTS table: lab_id is PRIMARY KEY, hadm_id is a FOREIGN KEY
CREATE TABLE LAB_RESULTS (
    lab_id INT PRIMARY KEY,
    hadm_id INT NOT NULL,
    test_name VARCHAR(100) NOT NULL,
    result_value DECIMAL(10, 2),
    result_unit VARCHAR(20),
    test_time TIMESTAMP,
    FOREIGN KEY (hadm_id) REFERENCES ADMISSIONS(hadm_id)
);</code></pre>
                </div>
                <p><strong>Explanation:</strong> This SQL creates three interconnected tables. <code>PATIENTS.subject_id</code> is the PRIMARY KEY. <code>ADMISSIONS.subject_id</code> is a FOREIGN KEY linking to <code>PATIENTS</code>. The composite UNIQUE key on <code>(subject_id, admit_time)</code> prevents duplicate admissions at the same time. <code>LAB_RESULTS</code> links to <code>ADMISSIONS</code> via <code>hadm_id</code>.</p>
                <p><strong>Expanded Example (Retail):</strong> A retail database with <code>Customers</code>, <code>Orders</code>, and <code>Order_Items</code>.</p>
                <div class="code-block">
                    <button class="btn btn-sm btn-secondary copy-btn" onclick="copyCode(this)">Copy</button>
                    <pre><code class="language-sql">-- Customers table: customer_id is PRIMARY KEY, email is UNIQUE
CREATE TABLE Customers (
    customer_id INT PRIMARY KEY,
    name VARCHAR(100) NOT NULL,
    email VARCHAR(100) UNIQUE NOT NULL,
    join_date DATE
);
-- Orders table: order_id is PRIMARY KEY, customer_id is FOREIGN KEY
CREATE TABLE Orders (
    order_id INT PRIMARY KEY,
    customer_id INT NOT NULL,
    order_date DATE NOT NULL,
    total_amount DECIMAL(10, 2) CHECK (total_amount >= 0),
    FOREIGN KEY (customer_id) REFERENCES Customers(customer_id)
);
-- Order_Items table: links orders to products
CREATE TABLE Order_Items (
    item_id INT PRIMARY KEY,
    order_id INT NOT NULL,
    product_id INT NOT NULL,
    quantity INT CHECK (quantity > 0),
    FOREIGN KEY (order_id) REFERENCES Orders(order_id)
);</code></pre>
                </div>
                <p><strong>Explanation:</strong> Here, <code>email</code> is UNIQUE to prevent duplicate customer emails, and <code>CHECK</code> ensures valid quantities and amounts. This structure supports tracking customer purchases efficiently.</p>

                <!-- Database Schemas -->
                <h3 class="h4 fw-bold mb-3">Database Schemas</h3>
                <p>A database schema organizes database objects (tables, views, etc.) into logical groups, enhancing organization and security.</p>
                <ul>
                    <li><strong>Purpose:</strong> Organizes data, controls access (e.g., only certain users access <code>payroll</code> schema), and avoids naming conflicts.</li>
                    <li><strong>Example:</strong> In PostgreSQL, the default <code>public</code> schema can be supplemented with custom schemas like <code>healthcare</code> or <code>inventory</code>.</li>
                </ul>
                <div class="code-block">
                    <button class="btn btn-sm btn-secondary copy-btn" onclick="copyCode(this)">Copy</button>
                    <pre><code class="language-sql">-- Create a schema for healthcare data
CREATE SCHEMA healthcare;
-- Create a table within the schema
CREATE TABLE healthcare.PatientsDemographics (
    patient_id INT PRIMARY KEY,
    first_name VARCHAR(50),
    last_name VARCHAR(50)
);
-- Set search path for easier querying
SET search_path TO healthcare, public;
SELECT * FROM PatientsDemographics;</code></pre>
                </div>
                <p><strong>Explanation:</strong> The <code>healthcare</code> schema isolates patient data. <code>SET search_path</code> simplifies queries by defaulting to this schema.</p>
                <p><strong>Expanded Example (University):</strong> A university might use schemas like <code>academics</code> for courses and <code>admin</code> for payroll.</p>
                <div class="code-block">
                    <button class="btn btn-sm btn-secondary copy-btn" onclick="copyCode(this)">Copy</button>
                    <pre><code class="language-sql">-- Create schemas for academics and admin
CREATE SCHEMA academics;
CREATE SCHEMA admin;
-- Create a Courses table in academics schema
CREATE TABLE academics.Courses (
    course_id INT PRIMARY KEY,
    course_name VARCHAR(100) NOT NULL,
    credits INT CHECK (credits > 0)
);
-- Create an Employees table in admin schema
CREATE TABLE admin.Employees (
    emp_id INT PRIMARY KEY,
    name VARCHAR(100) NOT NULL,
    salary DECIMAL(10, 2) CHECK (salary >= 0)
);</code></pre>
                </div>
                <p><strong>Explanation:</strong> This separates academic and administrative data, allowing different access controls for faculty and HR staff.</p>

                <!-- Normalization in Database Design -->
                <h3 class="h4 fw-bold mb-3">Normalization in Database Design</h3>
                <p>Normalization organizes data to reduce redundancy and improve integrity by breaking tables into smaller, related ones.</p>
                <ul>
                    <li><strong>Benefits:</strong>
                        <ul>
                            <li>Reduces redundancy, saving storage and preventing inconsistencies.</li>
                            <li>Ensures integrity; updates occur in one place.</li>
                            <li>Simplifies maintenance (e.g., updating a department name).</li>
                        </ul>
                    </li>
                    <li><strong>Normal Forms:</strong>
                        <ul>
                            <li><strong>1NF (First Normal Form):</strong> Atomic values, no repeating groups, unique rows.</li>
                            <li><strong>2NF (Second Normal Form):</strong> 1NF + all non-key attributes fully depend on the primary key.</li>
                            <li><strong>3NF (Third Normal Form):</strong> 2NF + no transitive dependencies (non-key attributes depend only on the primary key).</li>
                        </ul>
                    </li>
                    <li><strong>Denormalization:</strong> Intentionally adding redundancy for performance, used in analytics but risks inconsistency.</li>
                </ul>
                <div class="code-block">
                    <button class="btn btn-sm btn-secondary copy-btn" onclick="copyCode(this)">Copy</button>
                    <pre><code class="language-sql">-- Denormalized survey table
CREATE TABLE SurveyResponses_Denormalized (
    response_id INT PRIMARY KEY,
    respondent_name VARCHAR(100),
    respondent_age INT,
    city_id INT,
    city_name VARCHAR(100),
    state_name VARCHAR(100),
    survey_answer TEXT
);
-- Normalized to 3NF
CREATE TABLE Cities (
    city_id INT PRIMARY KEY,
    city_name VARCHAR(100) NOT NULL,
    state_name VARCHAR(100) NOT NULL,
    UNIQUE (city_name, state_name)
);
CREATE TABLE SurveyResponses_Normalized (
    response_id INT PRIMARY KEY,
    respondent_name VARCHAR(100),
    respondent_age INT,
    city_id INT,
    survey_answer TEXT,
    FOREIGN KEY (city_id) REFERENCES Cities(city_id)
);</code></pre>
                </div>
                <p><strong>Explanation:</strong> The denormalized table repeats <code>city_name</code> and <code>state_name</code>. Normalizing moves these to a <code>Cities</code> table, reducing redundancy.</p>
                <p><strong>Expanded Example (Library):</strong> A denormalized table might store book and author details together, but normalization separates them.</p>
                <div class="code-block">
                    <button class="btn btn-sm btn-secondary copy-btn" onclick="copyCode(this)">Copy</button>
                    <pre><code class="language-sql">-- Denormalized
CREATE TABLE Books_Denormalized (
    book_id INT PRIMARY KEY,
    title VARCHAR(100),
    author_name VARCHAR(100),
    author_birth_year INT,
    publish_date DATE
);
-- Normalized to 3NF
CREATE TABLE Authors (
    author_id INT PRIMARY KEY,
    author_name VARCHAR(100) NOT NULL,
    birth_year INT
);
CREATE TABLE Books (
    book_id INT PRIMARY KEY,
    title VARCHAR(100) NOT NULL,
    author_id INT,
    publish_date DATE,
    FOREIGN KEY (author_id) REFERENCES Authors(author_id)
);</code></pre>
                </div>
                <p><strong>Explanation:</strong> Separating <code>Authors</code> prevents repeating author details for multiple books, simplifying updates.</p>

                <!-- Entity-Relationship Diagrams (ERDs) -->
                <h3 class="h4 fw-bold mb-3">Entity-Relationship Diagrams (ERDs)</h3>
                <p>ERDs visually model database structures, showing entities, attributes, and relationships.</p>
                <ul>
                    <li><strong>Components:</strong>
                        <ul>
                            <li><strong>Entities (Rectangles):</strong> Tables like <code>PATIENTS</code>.</li>
                            <li><strong>Attributes (Ovals/Text):</strong> Columns like <code>name</code>, with primary keys underlined.</li>
                            <li><strong>Relationships (Lines):</strong> Use Crow's Foot notation for cardinality.
                                <ul>
                                    <li><strong>1:1:</strong> One-to-one (e.g., one patient, one medical record).</li>
                                    <li><strong>1:N:</strong> One-to-many (e.g., one patient, many admissions).</li>
                                    <li><strong>M:N:</strong> Many-to-many (e.g., students and courses via enrollments).</li>
                                </ul>
                            </li>
                        </ul>
                    </li>
                    <li><strong>Tools:</strong> Draw.io, Lucidchart, dbdiagram.io.</li>
                    <li><strong>Application:</strong> ERDs aid in designing and communicating complex database structures.</li>
                </ul>
                <p><strong>Sample ERD SQL (Hospital System):</strong></p>
                <div class="code-block">
                    <button class="btn btn-sm btn-secondary copy-btn" onclick="copyCode(this)">Copy</button>
                    <pre><code class="language-sql">-- SQL for ERD structure
CREATE TABLE Doctors (
    doctor_id INT PRIMARY KEY,
    name VARCHAR(100) NOT NULL
);
CREATE TABLE Patients (
    patient_id INT PRIMARY KEY,
    name VARCHAR(100) NOT NULL
);
CREATE TABLE Appointments (
    appointment_id INT PRIMARY KEY,
    doctor_id INT,
    patient_id INT,
    appt_date DATE,
    FOREIGN KEY (doctor_id) REFERENCES Doctors(doctor_id),
    FOREIGN KEY (patient_id) REFERENCES Patients(patient_id)
);</code></pre>
                </div>
                <p><strong>Explanation:</strong> This represents a 1:N relationship (one doctor, many appointments) and 1:N (one patient, many appointments).</p>

                <!-- Assessments -->
                <h2 class="h3 fw-bold border-bottom pb-2 mb-4">Assessments</h2>
                <ol>
                    <li><strong>Conceptual Question:</strong> Explain the difference between a <code>PRIMARY KEY</code> and a <code>UNIQUE</code> constraint. Provide a scenario where you would use a <code>UNIQUE</code> constraint on a column that is not the <code>PRIMARY KEY</code>.</li>
                    <li><strong>Design Task:</strong> A local animal shelter in Greensboro, NC, wants to track its animals, adoptions, and volunteers.
                        <ul>
                            <li>Design a normalized database schema (up to 3NF) for this system. Consider entities like <code>Animals</code>, <code>Adopters</code>, <code>Adoptions</code>, <code>Volunteers</code>, <code>VolunteerShifts</code>.</li>
                            <li>Define appropriate primary keys, foreign keys, and other constraints for each table.</li>
                            <li>Draw a simple Entity-Relationship Diagram (ERD) for your design, showing entities and relationships with cardinality.</li>
                        </ul>
                    </li>
                    <li><strong>Expanded Task (Retail):</strong> Design a 3NF schema for a bookstore tracking books, authors, and sales. Provide SQL creation statements and an ERD description.</li>
                </ol>
            </div>
        </section>
    </div>

    <!-- Footer -->
    <footer class="bg-light py-3 text-center">
        <p class="text-muted mb-0">&copy; 2025 Ali Noori, UNCG. All rights reserved.</p>
    </footer>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js" integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN" crossorigin="anonymous"></script>
    <!-- Highlight.js Initialization -->
    <script>hljs.highlightAll();</script>
    <!-- Custom Copy Functionality -->
    <script>
        function copyCode(button) {
            const code = button.nextElementSibling.querySelector('code');
            navigator.clipboard.writeText(code.innerText).then(() => {
                button.textContent = 'Copied!';
                setTimeout(() => { button.textContent = 'Copy'; }, 2000);
            });
        }
    </script>
</body>
</html>